{"version":3,"file":"/serviceWorker.js","mappings":";sQACA,q6OAIAA,KAAKC,iBAAiB,WAAW,SAACC,GAE9BF,KAAKG,aACR,IAGDH,KAAKC,iBAAiB,SAAS,SAACC,GAE/B,IAGDF,KAAKC,iBAAiB,QAAQ,SAACC,GAI3B,GAAMF,KAAKI,cAAiD,YAAjCJ,KAAKI,aAAaC,YAKzCH,EAAEI,KAAM,OACJC,EAAML,EAAEI,KAAKE,OACjBC,QAAQC,IAAIH,GACZL,EAAES,UAAUX,KAAKY,aAAaC,iBAAiBN,EAAIO,MAAO,CACtDC,KAAMR,EAAIQ,KACVC,KAAMT,EAAIS,KACVC,QAASV,EAAIU,QACbX,KAAI,UAAEC,EAAID,YAAN,QAAc,OAEzB,CACJ,IACDN,KAAKC,iBAAiB,qBAAqB,SAASiB,SAChDA,EAAMC,aAAaC,QACnBX,QAAQC,IAAI,2BAIZQ,EAAMP,aAAU,UAAC,iHAGO,MAFhBU,EAAeH,EAAMI,QADZ,wBAILC,EAAY,IAAIC,IAAIH,GACxBZ,QAAQC,IAAIa,GALH,SAMgBE,QAAQC,SAAS,CACtCC,qBAAqB,IAPhB,OAMHC,EANG,WAWYA,GAXZ,6DAWEC,EAXF,QAYCC,EAAM,IAAIN,IAAIK,EAAOC,KAC3BrB,QAAQC,IAAIoB,GAETA,EAAIC,WAAaR,EAAUQ,SAfzB,0CAgBMF,EAAOG,SAhBb,gJAoBTP,QAAQQ,WAAWV,EAAUQ,UApBpB,4BAqBHb,EAAMC,aAAab,KArBhB,qBAsBNY,EAAMC,aAAab,KAAKwB,IAtBlB,wBAuBLP,UAAY,IAAIC,IAAIN,EAAMC,aAAab,KAAKwB,KAvBvC,UAwBoBL,QAAQC,SAAS,CACtCC,qBAAqB,IAzBpB,QAwBCC,EAxBD,WA6BgBA,GA7BhB,8DA6BMC,EA7BN,SA8BKC,EAAM,IAAIN,IAAIK,EAAOC,MACpBC,WAAaR,UAAUQ,SA/B7B,0CAgCUF,EAAOG,SAhCjB,WAkCOE,EAAYJ,EAAIC,SAAUI,MAAM,KAChCC,EAAkBb,UAAUQ,SAAUI,MAAM,KAE7CD,EAAS,KAAOE,EAAe,GArCrC,0CAsCcP,EAAOQ,SAASd,UAAUQ,UAAUO,MAAK,SAAAT,GAAM,OAAIA,EAAOG,OAAX,KAtC7D,iJA2CLP,QAAQQ,WAAWV,UAAUQ,UA3CxB,8PA+CpB,IAAE","sources":["webpack:///./resources/js/serviceWorker.js"],"sourcesContent":["const cacheName = 'spentra-pwa-v1';\nconst appShellFiles = [];\nconst contentToCache = appShellFiles;\n\n// Install Service Worker\nself.addEventListener('install', (e) => {\n    // console.log(\"===== Installed =====\");\n    self.skipWaiting();\n});\n\n// Fetch Asset\nself.addEventListener('fetch', (e) => {\n    // console.log(\"===== Fetch =====\");\n});\n\n// Push Notification\nself.addEventListener('push', (e) => {\n    // console.log('===== SW Push Add Event Listener =====');\n    // console.log(e);\n    // console.log(e.data);\n    if (!(self.Notification && self.Notification.permission === 'granted')) {\n        //notifications aren't supported or permission not granted!\n        return;\n    }\n\n    if (e.data) {\n        var msg = e.data.json();\n        console.log(msg);\n        e.waitUntil(self.registration.showNotification(msg.title, {\n            body: msg.body,\n            icon: msg.icon,\n            actions: msg.actions,\n            data: msg.data ?? null\n        }));\n    }\n}); \nself.addEventListener('notificationclick', function(event) {\n    event.notification.close();\n    console.log(\"Notification is clicked\");\n    // console.log(event);\n    // clients.openWindow(`${baseUrl}/${event.action}`);\n\n    event.waitUntil((async () => {\n        let actionTarget = event.action;\n\n        if(actionTarget !== ''){\n            let actionUrl = new URL(actionTarget);\n            console.log(actionUrl);\n            const allClients = await clients.matchAll({\n                includeUncontrolled: true\n            });\n\n            // Let's see if we already have a chat window open:\n            for (const client of allClients) {\n                const url = new URL(client.url);\n                console.log(url);\n        \n                if(url.pathname === actionUrl.pathname){\n                    return client.focus();\n                }\n            }\n\n            clients.openWindow(actionUrl.pathname);\n        } else if(event.notification.data){\n            if(event.notification.data.url){\n                actionUrl = new URL(event.notification.data.url);\n                const allClients = await clients.matchAll({\n                    includeUncontrolled: true\n                });\n    \n                // Let's see if we already have a chat window open:\n                for (const client of allClients) {\n                    const url = new URL(client.url);\n                    if(url.pathname === actionUrl.pathname){\n                        return client.focus();\n                    } else {\n                        let splitUrl = (url.pathname).split('/');\n                        let splitTargetUrl = (actionUrl.pathname).split('/');\n\n                        if(splitUrl[1] === splitTargetUrl[1]){\n                            return client.navigate(actionUrl.pathname).then(client => client.focus());\n                        }\n                    }\n                }\n    \n                clients.openWindow(actionUrl.pathname);\n            }\n        }\n    })());\n}, false);"],"names":["self","addEventListener","e","skipWaiting","Notification","permission","data","msg","json","console","log","waitUntil","registration","showNotification","title","body","icon","actions","event","notification","close","actionTarget","action","actionUrl","URL","clients","matchAll","includeUncontrolled","allClients","client","url","pathname","focus","openWindow","splitUrl","split","splitTargetUrl","navigate","then"],"sourceRoot":""}