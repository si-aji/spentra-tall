{"version":3,"file":"/assets/plugins/nestable/nestable.js","mappings":"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","sources":["webpack:///./resources/js/plugins/nestable/src/utils/DOM.js","webpack:///./resources/js/plugins/nestable/src/index.js","webpack:///./resources/js/plugins/nestable/src/utils/Emitter.js","webpack:///./resources/js/plugins/nestable/script.js"],"sourcesContent":["const DOM = {\r\n    select: (selector, parent = document) => {\r\n        return parent.querySelector(selector);\r\n    },\r\n    selectAll: (selector, parent = document) => {\r\n        return parent.querySelectorAll(selector);\r\n    },\t\r\n    /**\r\n    * Get an elements children that match the selector\r\n    * @param  {Node} elem The base element\r\n    * @param  {String} selector CSS3 selector string\r\n    * @return {Array}\r\n    */\t\r\n    children: (elem, selector) => {\r\n        const arr = [];\r\n        const children = elem.children;\r\n        const l = children.length;\r\n        for (let i = 0; i < l; ++i){\r\n            const child = children[i];\r\n            if (child.matches(selector)){\r\n                arr.push(child);\r\n            }\r\n        }\r\n        return arr;\r\n    },\r\n    /**\r\n    * Get all DOM element up the tree that match the selector\r\n    * @param  {Node} elem The base element\r\n    * @param  {String} selector CSS3 selector string\r\n    * @return {Array}\r\n    */\r\n    parents: (elem, selector) => {\r\n        // Set up a parent array\r\n        var parents = [];\r\n\r\n        // Push each parent element to the array\r\n        for ( ; elem && elem !== document; elem = elem.parentNode ) {\r\n            if (selector) {\r\n                if (elem.matches(selector)) {\r\n                    parents.push(elem);\r\n                }\r\n                continue;\r\n            }\r\n            parents.push(elem);\r\n        }\r\n\r\n        // Return our parent array\r\n        return parents;\r\n    },\t\r\n    /**\r\n    * Get an element's DOMRect relative to the document instead of the viewport.\r\n    * @param  {Object} el  HTMLElement\r\n    * @return {Object}     Formatted DOMRect copy\r\n    */\r\n    rect(el) {\r\n            var w = window,\r\n                    st = (w.pageYOffset !== undefined) ? w.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop,\r\n                    o = el.getBoundingClientRect(),\r\n                    x = w.pageXOffset,\r\n                    y = st;\r\n            return {\r\n                    left: o.left + x,\r\n                    top: o.top + y,\r\n                    height: o.height,\r\n                    width: o.width\r\n            };\r\n    }\r\n};\r\n\r\nexport default DOM;","import DOM from \"./utils/DOM.js\";\r\nimport Emitter from \"./utils/Emitter.js\";\r\n\r\nexport default class Nestable extends Emitter {\r\n    constructor(list, options) {\r\n\r\n        super();\r\n\r\n        this.defaultConfig = {\r\n            threshold: 40,\r\n            animation: 0,\r\n            collapseButtonContent: \"–\",\r\n            expandButtonContent: \"+\",\r\n            includeContent: false,\r\n            maxDepth: 3,\r\n            showPlaceholderOnMove: false,\r\n            nodes: {\r\n                list: \"ol\",\r\n                item: \"li\"\r\n            },\r\n            classes: {\r\n                list: \"nst-list\",\r\n                item: \"nst-item\",\r\n                content: \"nst-content\",\r\n                parent: \"nst-parent\",\r\n                dragging: \"nst-dragging\",\r\n                handle: \"nst-handle\",\r\n                placeholder: \"nst-placeholder\",\r\n                container: \"nst-container\",\r\n                button: \"nst-button\",\r\n                collapsed: \"nst-collapsed\",\r\n                disabled: \"nst-disabled\",\r\n                error: \"nst-error\",\r\n                moving: \"nst-moving\",\r\n            },\r\n        };\r\n\r\n        this.config = Object.assign({}, this.defaultConfig, options);\r\n\r\n        if (options) {\r\n            if (options.nodes) {\r\n                this.config.nodes = Object.assign({}, this.defaultConfig.nodes, options.nodes);\r\n            }\r\n\r\n            if (options.classes) {\r\n                this.config.classes = Object.assign({}, this.defaultConfig.classes, options.classes);\r\n            }\r\n        }\r\n\r\n        this.parent = typeof list === \"string\" ? DOM.select(list) : list;\r\n\r\n        if (!this.parent) {\r\n            return console.error(`Node (${list}) not found.`);\r\n        }\r\n\r\n        if (this.parent._nestable) {\r\n            return console.error(\"There is already a Nestable instance active on this node.\");\r\n        }\r\n\r\n        this.initialised = false;\r\n        this.disabled = true;\r\n        this.last = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n\r\n        this.init();\r\n    }\r\n\r\n    init(options) {\r\n        if (!this.initialised) {\r\n\r\n            this.touch =\r\n                \"ontouchstart\" in window ||\r\n                (window.DocumentTouch && document instanceof DocumentTouch);\r\n\r\n            if (options) {\r\n                this.config = Object.assign({}, this.defaultConfig, options);\r\n            }\r\n\r\n            this.dragDepth = 0;\r\n\r\n            this.parent.classList.add(this.config.classes.list);\r\n            this.parent.classList.add(this.config.classes.parent);\r\n\r\n\r\n            const items = DOM.children(this.parent, this.config.nodes.item);\r\n            for (const item of items) {\r\n                this._nest(item);\r\n            }\r\n\r\n            this.placeholder = document.createElement(this.config.nodes.item);\r\n            this.placeholder.classList.add(this.config.classes.placeholder);\r\n\r\n            this._getData();\r\n\r\n            this.parent._nestable = this;\r\n\r\n            if (!window._nestableInstances) {\r\n                window._nestableInstances = 1;\r\n\r\n                this.id = 1;\r\n            } else {\r\n                window._nestableInstances += 1;\r\n\r\n                this.id = window._nestableInstances\r\n            }\r\n\r\n            this.enable();\r\n\r\n            this._getData();\r\n\r\n            setTimeout(() => {\r\n                this.emit(\"init\");\r\n            }, 10);\r\n\r\n            this.initialised = true;\r\n\r\n            if (this.config.data) {\r\n                const req = new XMLHttpRequest();\r\n                req.responseType = 'json';\r\n                req.open('GET', this.config.data, true);\r\n                req.onload = () => {\r\n                    this.load(req);\r\n                };\r\n                req.send(null);\r\n            }\r\n        }\r\n    }\r\n\r\n    load(data) {\r\n        this.removeAll();\r\n\r\n        if (\"response\" in data) {\r\n            data = data.response;\r\n        }\r\n\r\n        const nest = (item) => {\r\n            const el = document.createElement(this.config.nodes.item);\r\n            el.textContent = item.content;\r\n\r\n            if (item.children) {\r\n                const list = document.createElement(this.config.nodes.list);\r\n\r\n                el.appendChild(list);\r\n                for (const child of item.children) {\r\n                    list.appendChild(nest(child));\r\n                }\r\n            }\r\n\r\n            return el;\r\n        };\r\n\r\n        for (const item of data) {\r\n            this._nest(this.parent.appendChild(nest(item)))\r\n        }\r\n\r\n        this.emit(\"loaded\");\r\n    }\r\n\r\n    destroy() {\r\n\r\n        if (this.initialised) {\r\n\r\n            this.initialised = false;\r\n\r\n            this.disable();\r\n\r\n            this.parent.classList.remove(this.config.classes.list);\r\n            this.parent.classList.remove(this.config.classes.parent);\r\n\r\n            delete(this.parent._nestable);\r\n\r\n            if (window._nestableInstances) {\r\n                window._nestableInstances -= 1;\r\n            }\r\n\r\n            const destroyItem = (item) => {\r\n                item.classList.remove(this.config.classes.item);\r\n                item.classList.remove(this.config.classes.collapsed);\r\n\r\n                const listEl = item.querySelector(this.config.nodes.list);\r\n                const contentEl = item.querySelector(`.${this.config.classes.content}`);\r\n                const handleEl = item.querySelector(`.${this.config.classes.handle}`);\r\n                const buttonEl = item.querySelector(`.${this.config.classes.button}`);\r\n\r\n                // default handle is also the content container\r\n                const defaultHandle = contentEl.classList.contains(this.config.classes.handle);\r\n\r\n                const div = document.createDocumentFragment();\r\n\r\n                for (var i = contentEl.childNodes.length - 1; i >= 0; i--) {\r\n                    div.insertBefore(contentEl.childNodes[i], div.firstChild);\r\n                }\r\n\r\n                item.insertBefore(div, contentEl)\r\n                item.removeChild(contentEl);\r\n\r\n                if (listEl) {\r\n                    listEl.classList.remove(this.config.classes.list);\r\n                    item.removeChild(buttonEl);\r\n\r\n                    const items = DOM.children(listEl, this.config.nodes.item);\r\n\r\n                    for (const item of items) {\r\n                        destroyItem(item);\r\n                    }\r\n                }\r\n            };\r\n\r\n            const items = DOM.children(this.parent, this.config.nodes.item);\r\n\r\n            for (const item of items) {\r\n                destroyItem(item);\r\n            }\r\n\r\n            this.emit(\"destroy\", this.parent);\r\n        }\r\n    }\r\n\r\n    bind() {\r\n        this.events = {\r\n            start: this._onMouseDown.bind(this),\r\n            move: this._onMouseMove.bind(this),\r\n            end: this._onMouseUp.bind(this),\r\n        };\r\n\r\n        if (this.touch) {\r\n            this.parent.addEventListener(\"touchstart\", this.events.start, false);\r\n            document.addEventListener(\"touchmove\", this.events.move, false);\r\n            document.addEventListener(\"touchend\", this.events.end, false);\r\n            document.addEventListener(\"touchcancel\", this.events.end, false);\r\n        } else {\r\n            this.parent.addEventListener(\"mousedown\", this.events.start, false);\r\n            document.addEventListener(\"mousemove\", this.events.move, false);\r\n            document.addEventListener(\"mouseup\", this.events.end, false);\r\n        }\r\n    }\r\n\r\n    unbind() {\r\n        this.parent.removeEventListener(\"mousedown\", this.events.start);\r\n        document.removeEventListener(\"mousemove\", this.events.move);\r\n        document.removeEventListener(\"mouseup\", this.events.end);\r\n    }\r\n\r\n    enable() {\r\n        if (this.disabled) {\r\n            this.bind();\r\n\r\n            this.parent.classList.remove(this.config.classes.disabled);\r\n\r\n            this.disabled = false;\r\n        }\r\n    }\r\n\r\n    disable() {\r\n        if (!this.disabled) {\r\n            this.unbind();\r\n\r\n            this.parent.classList.add(this.config.classes.disabled);\r\n\r\n            this.disabled = true;\r\n        }\r\n    }\r\n\r\n    serialise() {\r\n        this.serialize();\r\n    }\r\n\r\n    serialize() {\r\n        return this._getData(\"data\");\r\n    }\r\n\r\n    collapseAll() {\r\n        const items = DOM.selectAll(`.${this.config.classes.item}`, this.parent);\r\n        for (const item of items) {\r\n            if (!item.classList.contains(this.config.classes.collapsed)) {\r\n                const btn = item.querySelector(`.${this.config.classes.button}`);\r\n\r\n                if (btn) {\r\n                    this._collapseList(item, btn);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    expandAll() {\r\n        const items = DOM.selectAll(`.${this.config.classes.item}`, this.parent);\r\n        for (const item of items) {\r\n            if (item.classList.contains(this.config.classes.collapsed)) {\r\n                const btn = item.querySelector(`.${this.config.classes.button}`);\r\n\r\n                if (btn) {\r\n                    this._expandList(item, btn);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    add(element, parent) {\r\n\r\n        if (!parent) {\r\n            parent = this.parent;\r\n        }\r\n\r\n        this._nest(element);\r\n\r\n        if (parent !== this.parent) {\r\n            const listEl = DOM.select(this.config.nodes.list, parent);\r\n\r\n            if (!listEl) {\r\n                parent = this._makeParent(parent);\r\n            } else {\r\n                parent = listEl;\r\n            }\r\n        }\r\n\r\n        parent.appendChild(element);\r\n\r\n        this.update();\r\n    }\r\n\r\n    remove(element, removeChildElements = true) {\r\n\r\n        const parentEl = element.closest(this.config.nodes.list);\r\n\r\n        if (!removeChildElements) {\r\n            const childList = element.querySelector(`.${this.config.classes.list}`);\r\n\r\n            if (childList) {\r\n\r\n                const childElements = DOM.children(childList, this.config.nodes.item);\r\n\r\n                if (childElements.length) {\r\n                    const frag = document.createDocumentFragment();\r\n\r\n                    for (var i = childElements.length - 1; i >= 0; i--) {\r\n                        const childElement = childElements[i];\r\n                        frag.insertBefore(childElement, frag.firstElementChild);\r\n                    }\r\n                    parentEl.replaceChild(frag, element);\r\n                }\r\n            }\r\n        } else {\r\n            parentEl.removeChild(element);\r\n        }\r\n\r\n        this.update();\r\n    }\r\n\r\n    removeAll() {\r\n        const nodes = this.parent.children;\r\n        for (var i = nodes.length - 1; i >= 0; i--) {\r\n            this.parent.removeChild(nodes[i]);\r\n        }\r\n    }\r\n\r\n    update() {\r\n        this._getData(\"nodes\");\r\n\r\n        this.emit(\"update\");\r\n    }\r\n\r\n    _nest(el) {\r\n        const handle = el.querySelector(`.${this.config.classes.handle}`);\r\n\r\n        const content = document.createElement(\"div\");\r\n        content.classList.add(this.config.classes.content);\r\n\r\n        const nodes = el.childNodes;\r\n\r\n        if (!handle) {\r\n            content.classList.add(this.config.classes.handle);\r\n\r\n            for (var i = nodes.length - 1; i >= 0; i--) {\r\n                const node = nodes[i];\r\n                if (node.nodeName.toLowerCase() !== this.config.nodes.list) {\r\n                    content.insertBefore(node, content.firstChild);\r\n                }\r\n            }\r\n        } else {\r\n            for (var i = nodes.length - 1; i >= 0; i--) {\r\n                const node = nodes[i];\r\n                if (node !== handle && node.nodeName.toLowerCase() !== this.config.nodes.list) {\r\n                    content.insertBefore(node, content.firstChild);\r\n                }\r\n            }\r\n        }\r\n\r\n        el.classList.add(this.config.classes.item);\r\n\r\n        const list = el.querySelector(this.config.nodes.list);\r\n\r\n        if (list) {\r\n            el.insertBefore(content, list);\r\n            const parent = this._makeParent(el);\r\n            const items = DOM.children(parent, this.config.nodes.item);\r\n\r\n            if (el.classList.contains(this.config.classes.collapsed)) {\r\n                this._collapseList(el);\r\n            }\r\n\r\n            for (const i of items) {\r\n                this._nest(i);\r\n            }\r\n        } else {\r\n            el.appendChild(content);\r\n        }\r\n    }\r\n\r\n    _isDisabled(item, type = \"disabled\") {\r\n\r\n        if (item === null) {\r\n            return false;\r\n        }\r\n\r\n        // item has the [data-nestable-disabled] attribute\r\n        if (\"nestableDisabled\" in item.dataset) {\r\n            if (type === \"disabled\" && (!item.dataset.nestableDisabled.length || item.dataset.nestableDisabled === \"disabled\") ||\r\n                type === \"dragging\" && item.dataset.nestableDisabled === \"dragging\" ||\r\n                type === \"nesting\" && item.dataset.nestableDisabled === \"nesting\"\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (item.classList.contains(this.config.classes.disabled)) {\r\n            return true;\r\n        }\r\n\r\n        const listEls = DOM.parents(item, `.${this.config.classes.disabled}`);\r\n\r\n        if (listEls.length) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Get mouse / touch event\r\n     * @return {Object}\r\n     */\r\n    _getEvent(e) {\r\n        if (this.touch) {\r\n            if (e.type === \"touchend\") {\r\n                return e.changedTouches[0];\r\n            }\r\n            return e.touches[0];\r\n        }\r\n        return e;\r\n    }\r\n\r\n    _onMouseDown(e) {\r\n\r\n        const evt = this._getEvent(e);\r\n\r\n        const button = e.target.closest(`.${this.config.classes.button}`);\r\n        const item = e.target.closest(`.${this.config.classes.item}`);\r\n\r\n        if (button) {\r\n            return this._toggleList(item, button);\r\n        }\r\n\r\n        const handle = e.target.closest(`.${this.config.classes.handle}`);\r\n\r\n        if (!handle) {\r\n            return false;\r\n        }\r\n\r\n        if (item) {\r\n            if (this._isDisabled(item) || this._isDisabled(item.parentNode.closest(`.${this.config.classes.item}`))) {\r\n                return false;\r\n            }\r\n\r\n            if (this._isDisabled(item, \"dragging\")) {\r\n                this.emit(\"error.dragging.disabled\", item);\r\n\r\n                return false;\r\n            }\r\n\r\n            e.preventDefault();\r\n\r\n            this.parent.classList.add(this.config.classes.moving);\r\n\r\n            item.classList.add(this.config.classes.dragging);\r\n\r\n            const rect = DOM.rect(item);\r\n\r\n            this.origin = {\r\n                x: evt.pageX,\r\n                y: evt.pageY,\r\n                original: {\r\n                    x: evt.pageX,\r\n                    y: evt.pageY,\r\n                },\r\n            };\r\n\r\n            this.hierarchy = {\r\n                movedNode: item,\r\n                originalParent: item.parentNode,\r\n                originalParentItem: item.parentNode.closest(`.${this.config.classes.item}`)\r\n            }\r\n\r\n            this.active = {\r\n                maxDepth: false,\r\n                collapsedParent: false,\r\n                disabledParent: false,\r\n                confinedParent: false,\r\n                node: item,\r\n                rect: rect,\r\n                parent: false,\r\n                axis: false,\r\n            };\r\n\r\n            // item has the [data-nestable-parent] attribute\r\n            if (\"nestableParent\" in item.dataset) {\r\n                const parent = document.getElementById(item.dataset.nestableParent);\r\n\r\n                if (parent) {\r\n                    this.active.parent = parent;\r\n                }\r\n            }\r\n\r\n            // item has the [data-nestable-axis] attribute\r\n            if (\"nestableAxis\" in item.dataset) {\r\n                const axis = item.dataset.nestableAxis;\r\n                if (axis === \"x\") {\r\n                    this.active.axis = \"x\";\r\n                } else if (axis === \"y\") {\r\n                    this.active.axis = \"y\";\r\n                }\r\n            }\r\n\r\n            this.placeholder.style.height = `${rect.height}px`;\r\n            // this.placeholder.style.width = `${rect.width}px`;\r\n\r\n            if (this.config.showPlaceholderOnMove) {\r\n                this.placeholder.style.opacity = 0;\r\n            }\r\n\r\n            if (!this.container) {\r\n                this.container = document.createElement(this.config.nodes.list);\r\n                this.container.classList.add(this.config.classes.list);\r\n                this.container.classList.add(this.config.classes.container);\r\n                this.container.id = `nestable_${this.id}`;\r\n            }\r\n\r\n            this.container.style.left = `${rect.left}px`;\r\n            this.container.style.top = `${rect.top}px`;\r\n            this.container.style.height = `${rect.height}px`;\r\n            this.container.style.width = `${rect.width}px`;\r\n\r\n            item.parentNode.insertBefore(this.placeholder, item);\r\n\r\n            document.body.appendChild(this.container);\r\n            this.container.appendChild(item);\r\n\r\n            this.newParent = false;\r\n\r\n            this.dragDepth = 0;\r\n\r\n            // total depth of dragging item\r\n            const items = DOM.selectAll(this.config.nodes.item, item);\r\n            for (let i = 0; i < items.length; i++) {\r\n                const depth = DOM.parents(items[i], this.config.nodes.list).length - 1;\r\n                if (depth > this.dragDepth) {\r\n                    this.dragDepth = depth;\r\n                }\r\n            }\r\n\r\n            this.emit(\"start\", this.active);\r\n        }\r\n    }\r\n\r\n    _onMouseMove(e) {\r\n        if (this.active) {\r\n\r\n            if (this.config.showPlaceholderOnMove) {\r\n                this.placeholder.style.opacity = 1;\r\n            }\r\n\r\n            e = this._getEvent(e);\r\n\r\n            let x = e.pageX - this.origin.x;\r\n            let y = e.pageY - this.origin.y;\r\n\r\n            if (e.pageY > this.last.y) {\r\n                this.last.dirY = 1;\r\n            } else if (e.pageY < this.last.y) {\r\n                this.last.dirY = -1;\r\n            }\r\n\r\n            if (e.pageX > this.last.x) {\r\n                this.last.dirX = 1;\r\n            } else if (e.pageX < this.last.x) {\r\n                this.last.dirX = -1;\r\n            }\r\n\r\n            let movement = false;\r\n\r\n            if (Math.abs(x) > Math.abs(y)) {\r\n                movement = \"x\";\r\n            } else if (Math.abs(x) < Math.abs(y)) {\r\n                movement = \"y\";\r\n            }\r\n\r\n            var scrollTop = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;\r\n            const elements = document.elementsFromPoint(e.pageX, e.pageY - scrollTop);\r\n\r\n            if (movement === \"x\" && this.active.axis !== \"y\") {\r\n                if (this.last.dirX > 0 && x > this.config.threshold) { // moving right\t\t\t\t\r\n\r\n                    const prevEl = this.placeholder.previousElementSibling;\r\n\r\n                    if (prevEl) {\r\n\r\n                        if (prevEl.classList.contains(this.config.classes.collapsed)) {\r\n                            if (!this.active.collapsedParent) {\r\n                                this.emit(\"error.collapsed\", this.active.node, prevEl);\r\n\r\n                                this.active.collapsedParent = true;\r\n                            }\r\n                        } else {\r\n                            const disabled = this._isDisabled(prevEl);\r\n                            const cantNest = this._isDisabled(prevEl, \"nesting\");\r\n\r\n                            if (!disabled) {\r\n                                const depth = DOM.parents(this.placeholder, this.config.nodes.list).length;\r\n                                let allowNesting = depth + this.dragDepth <= this.config.maxDepth;\r\n                                let parentEl = prevEl.querySelector(this.config.nodes.list);\r\n\r\n                                if (cantNest) {\r\n                                    if (!this.active.nestDisabled) {\r\n                                        this.emit(\"error.nesting.disabled\", this.active.node);\r\n\r\n                                        this.active.nestDisabled = true;\r\n                                    }\r\n                                } else {\r\n                                    if (allowNesting) {\r\n                                        this.active.maxDepth = false;\r\n                                        const oldParent = this.placeholder.closest(`.${this.config.classes.list}`);\r\n\r\n                                        if (!parentEl) {\r\n                                            parentEl = this._makeParent(prevEl);\r\n                                        }\r\n\r\n                                        this._moveElement(this.placeholder, {\r\n                                            parent: parentEl,\r\n                                            type: \"appendChild\",\r\n                                        });\r\n\r\n                                        this.emit(\"nest\", parentEl, oldParent);\r\n\r\n                                        this.origin.x = e.pageX;\r\n                                    } else {\r\n                                        if (!this.active.maxDepth) {\r\n                                            this.emit(\"error.maxdepth\", this.active.node, this.config.maxDepth);\r\n\r\n                                            this.active.maxDepth = true;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                if (!this.active.disabledParent) {\r\n                                    this.emit(\"error.disabled\");\r\n\r\n                                    this.active.disabledParent = true;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                } else if (this.last.dirX < 0 && x < -this.config.threshold) { // moving left\r\n\r\n                    this.active.maxDepth = false;\r\n                    this.active.nestDisabled = false;\r\n                    this.active.disabledParent = false;\r\n                    this.active.collapsedParent = false;\r\n                    // this.active.confinedParent = false;\r\n\r\n                    const listEl = this.placeholder.closest(this.config.nodes.list);\r\n                    const parentEl = listEl.closest(this.config.nodes.item);\r\n\r\n                    if (parentEl &&\r\n                        ((listEl.childElementCount > 1 && this.placeholder !== listEl.firstElementChild) || listEl.childElementCount < 2 && this.placeholder === listEl.firstElementChild)) {\r\n                        const nextEl = parentEl.nextElementSibling;\r\n                        const oldParent = this.placeholder.closest(`.${this.config.classes.list}`);\r\n\r\n                        if (nextEl) {\r\n                            const list = nextEl.closest(this.config.nodes.list);\r\n                            this._moveElement(this.placeholder, {\r\n                                parent: list,\r\n                                type: \"insertBefore\",\r\n                                sibling: nextEl\r\n                            });\r\n\r\n                            this.origin.x = e.pageX;\r\n                        } else {\r\n                            this._moveElement(this.placeholder, {\r\n                                parent: parentEl.closest(this.config.nodes.list),\r\n                                type: \"appendChild\",\r\n                            });\r\n\r\n                            this.origin.x = e.pageX;\r\n                        }\r\n\r\n                        this.emit(\"unnest\", parentEl, oldParent);\r\n                    }\r\n                }\r\n            } else {\r\n                // check if we're over a valid item\r\n                for (const element of elements) {\r\n                    const moveY = element !== this.active.node &&\r\n                        !this.active.node.contains(element) &&\r\n                        element.classList.contains(this.config.classes.content) &&\r\n                        this.active.axis !== \"x\";\r\n\r\n                    if (moveY) {\r\n                        const item = element.closest(`.${this.config.classes.item}`);\r\n\r\n                        if (item) {\r\n                            if (movement === \"y\") {\r\n                                const childListEl = item.querySelector(this.config.nodes.list);\r\n                                if (childListEl && !item.classList.contains(this.config.classes.collapsed)) { // item is parent\r\n                                    if (this.last.dirY > 0) { // moving item down\r\n                                        this._moveElement(this.placeholder, {\r\n                                            parent: item.lastElementChild,\r\n                                            type: \"insertBefore\",\r\n                                            sibling: item.lastElementChild.firstElementChild,\r\n                                            animatable: item.querySelector(`.${this.config.classes.content}`)\r\n                                        });\r\n                                    } else if (this.last.dirY < 0) { // moving item up\r\n                                        this._moveElement(this.placeholder, {\r\n                                            parent: item.parentNode,\r\n                                            type: \"insertBefore\",\r\n                                            sibling: item,\r\n                                            animatable: item.querySelector(`.${this.config.classes.content}`)\r\n                                        });\r\n                                    }\r\n\r\n                                    this.emit(\"reorder\");\r\n                                } else { // item is not a parent\r\n                                    if (this.last.dirY > 0) { // moving item down\r\n                                        const nextEl = item.nextElementSibling;\r\n\r\n                                        if (nextEl) { // item has an item below it\r\n                                            this._moveElement(this.placeholder, {\r\n                                                parent: item.parentNode,\r\n                                                type: \"insertBefore\",\r\n                                                sibling: nextEl,\r\n                                                animatable: item.querySelector(`.${this.config.classes.content}`)\r\n                                            });\r\n                                        } else { // item is last in list\t\t\t\t\r\n                                            this._moveElement(this.placeholder, {\r\n                                                parent: item.closest(this.config.nodes.list),\r\n                                                type: \"appendChild\",\r\n                                                animatable: item.querySelector(`.${this.config.classes.content}`)\r\n                                            });\r\n                                        }\r\n                                    } else if (this.last.dirY < 0) { // moving item up\r\n                                        this._moveElement(this.placeholder, {\r\n                                            parent: item.parentNode,\r\n                                            type: \"insertBefore\",\r\n                                            sibling: item,\r\n                                            animatable: item.querySelector(`.${this.config.classes.content}`)\r\n                                        });\r\n                                    }\r\n\r\n                                    this.emit(\"reorder\");\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        const parentEl = item.closest(`.${this.config.classes.parent}`);\r\n\r\n                        if (parentEl) {\r\n                            if (parentEl !== this.parent) {\r\n                                if (parentEl._nestable) {\r\n                                    this.newParent = parentEl;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.placeholder.classList.toggle(this.config.classes.error,\r\n                this.active.disabledParent ||\r\n                this.active.maxDepth ||\r\n                this.active.collapsedParent ||\r\n                this.active.confinedParent);\r\n\r\n            let mx = e.pageX - this.origin.original.x;\r\n            let my = e.pageY - this.origin.original.y;\r\n\r\n            // item movement is confined\r\n            if (this.active.axis) {\r\n                if (this.active.axis === \"x\") {\r\n                    my = 0;\r\n                } else if (this.active.axis === \"y\") {\r\n                    mx = 0;\r\n                }\r\n            }\r\n\r\n            this.container.style.transform = `translate3d(${mx}px, ${my}px, 0)`;\r\n\r\n            this.lastParent = this.placeholder.parentNode;\r\n            this.hierarchy.newParent = this.lastParent;\r\n            this.hierarchy.newParentItem = this.lastParent.closest(`.${this.config.classes.item}`);\r\n\r\n            this.emit(\"move\", this.active);\r\n        }\r\n\r\n        this.last = {\r\n            x: e.pageX,\r\n            y: e.pageY\r\n        };\r\n    }\r\n\r\n    _moveElement(el, type) {\r\n        let ppos = false;\r\n        let ipos = false;\r\n\r\n        // prevent moving if item has disabled parents\r\n        if (this._isDisabled(type.parent) || this._isDisabled(type.parent.closest(`.${this.config.classes.item}`))) {\r\n            return false;\r\n        }\r\n\r\n        // prevent moving if item is confined to parent with data-nestable-parent\r\n        if (this.active.parent) {\r\n            if (!DOM.parents(type.parent, `#${this.active.parent.id}`).includes(this.active.parent)) {\r\n                if (!this.active.confinedParent) {\r\n\r\n                    this.emit(\"error.confined\", el, this.active.parent, type.parent);\r\n                    this.active.confinedParent = true;\r\n                }\r\n\r\n                return false;\r\n            }\r\n        }\r\n\r\n        let listEl = el.closest(this.config.nodes.list);\r\n\r\n        // if animation is enabled, we need to get the original position of the element first\r\n        if (this.config.animation > 0) {\r\n            ppos = DOM.rect(this.placeholder);\r\n            if (type.animatable) {\r\n                ipos = DOM.rect(type.animatable)\r\n            }\r\n        }\r\n\r\n        if (type.type === \"insertBefore\") {\r\n            type.parent.insertBefore(el, type.sibling);\r\n        } else if (type.type === \"appendChild\") {\r\n            type.parent.appendChild(el);\r\n        }\r\n\r\n        if (!listEl.childElementCount) {\r\n            this._unmakeParent(listEl.parentNode);\r\n        }\r\n\r\n        this.emit(\"order.change\", this.active.node, type.parent, listEl);\r\n\r\n        // animate the elements\r\n        if (this.config.animation > 0) {\r\n            this._animateElement(this.placeholder, ppos);\r\n\r\n            if (type.animatable && ipos) {\r\n                this._animateElement(type.animatable, ipos);\r\n            }\r\n        }\r\n    }\r\n\r\n    _animateElement(el, obj) {\r\n        // Animate an element's change in position\r\n        // caused by a change in the DOM order\r\n        let css = el.style;\r\n\r\n        // Get the node's positon AFTER the change\r\n        let r = DOM.rect(el);\r\n\r\n        // Calculate the difference in position\r\n        let x = obj.left - r.left;\r\n        let y = obj.top - r.top;\r\n\r\n        // Move the node to it's original position before the DOM change\r\n        css.transform = `translate3d(${x}px, ${y}px, 0px)`;\r\n        // css.zIndex = 10000;\r\n\r\n        // Trigger a repaint so the next bit works\r\n        this._repaint(el);\r\n\r\n        // Reset the transform, but add a transition so it's smooth\r\n        css.transform = `translate3d(0px, 0px, 0px)`;\r\n        css.transition = `transform ${this.config.animation}ms`;\r\n\r\n        // Reset the style\r\n        setTimeout(function() {\r\n            // console.log(\"foo\")\r\n            // css.zIndex = \"\";\r\n            css.transform = \"\";\r\n            css.transition = \"\";\r\n        }, this.config.animation);\r\n    }\r\n\r\n    _repaint(el) {\r\n        return el.offsetHeight;\r\n    }\r\n\r\n    _onMouseUp(e) {\r\n        if (this.active) {\r\n\r\n            if (this.config.showPlaceholderOnMove) {\r\n                this.placeholder.style.opacity = 0;\r\n            }\r\n\r\n            e = this._getEvent(e);\r\n\r\n            const prect = DOM.rect(this.active.node);\r\n\r\n            // this.active.node.removeAttribute(\"style\");\r\n            this.container.removeAttribute(\"style\");\r\n\r\n            this.parent.classList.remove(this.config.classes.moving);\r\n\r\n            this.placeholder.parentNode.replaceChild(this.active.node, this.placeholder);\r\n\r\n            this._animateElement(this.active.node, prect);\r\n\r\n            this.placeholder.classList.remove(this.config.classes.error);\r\n            this.active.node.classList.remove(this.config.classes.dragging);\r\n\r\n            this.active = false;\r\n\r\n            document.body.removeChild(this.container);\r\n\r\n            this._getData();\r\n\r\n            if (this.newParent) {\r\n                this.hierarchy.newInstance = this.newParent._nestable;\r\n                this.newParent._nestable._getData();\r\n            }\r\n\r\n            this.hierarchy.hierarchy = this.data\r\n\r\n            this.emit(\"stop\", this.hierarchy);\r\n\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    _toggleList(item, btn) {\r\n        if (!item.classList.contains(this.config.classes.collapsed)) {\r\n            this._collapseList(item, btn);\r\n        } else {\r\n            this._expandList(item, btn);\r\n        }\r\n    }\r\n\r\n    _collapseList(item, btn) {\r\n        if (!btn) {\r\n            btn = item.querySelector(`.${this.config.classes.button}`)\r\n        }\r\n\r\n        btn.textContent = this.config.expandButtonContent;\r\n        item.classList.add(this.config.classes.collapsed);\r\n\r\n        this.emit(\"list.collapse\", item);\r\n    }\r\n\r\n    _expandList(item, btn) {\r\n        if (!btn) {\r\n            btn = item.querySelector(`.${this.config.classes.button}`)\r\n        }\r\n\r\n        btn.textContent = this.config.collapseButtonContent;\r\n        item.classList.remove(this.config.classes.collapsed);\r\n\r\n        this.emit(\"list.expand\", item);\r\n    }\r\n\r\n    _makeParent(el) {\r\n        let parentEl = el.querySelector(this.config.nodes.list);\r\n\r\n        if (!parentEl) {\r\n            parentEl = document.createElement(this.config.nodes.list);\r\n            parentEl.classList.add(this.config.classes.list);\r\n            el.appendChild(parentEl);\r\n        } else {\r\n            parentEl.classList.add(this.config.classes.list);\r\n        }\r\n\r\n        const button = document.createElement(\"button\");\r\n        button.classList.add(this.config.classes.button);\r\n        button.type = \"button\";\r\n        button.textContent = this.config.collapseButtonContent;\r\n        el.insertBefore(button, el.firstElementChild);\r\n\r\n        return parentEl;\r\n    }\r\n\r\n    _unmakeParent(el) {\r\n        const list = el.querySelector(this.config.nodes.list);\r\n        const btn = el.querySelector(\"button\");\r\n\r\n        if (list) {\r\n            el.removeChild(list);\r\n        }\r\n\r\n        if (btn) {\r\n            el.removeChild(btn);\r\n        }\r\n\r\n        return\r\n    }\r\n\r\n    _getData(type = \"nodes\") {\r\n        let data = [];\r\n\r\n        const step = (level) => {\r\n            const array = [];\r\n            const items = DOM.children(level, this.config.nodes.item);\r\n\r\n            items.forEach((li) => {\r\n                const item = {};\r\n\r\n                if (type === \"nodes\") {\r\n                    item.node = li;\r\n                } else {\r\n                    item.data = Object.assign({}, li.dataset);\r\n\r\n                    if (this.config.includeContent) {\r\n                        const content = li.querySelector(`.${this.config.classes.content}`);\r\n\r\n                        if (content) {\r\n                            item.content = content.innerHTML;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                const sub = li.querySelector(this.config.nodes.list);\r\n\r\n                if (sub) {\r\n                    item.children = step(sub);\r\n                }\r\n\r\n                array.push(item);\r\n            });\r\n\r\n            return array;\r\n        };\r\n\r\n        data = step(this.parent);\r\n\r\n        if (type === \"nodes\") {\r\n            this.data = data;\r\n        }\r\n\r\n        return data;\r\n    }\r\n}\r\n","export default class Emitter {\r\n\t\r\n    /**\r\n    * Add custom event listener\r\n    * @param  {String} event\r\n    * @param  {Function} callback\r\n    * @return {Void}\r\n    */\r\n    on(listener, fn, capture) {\r\n            if (typeof listener === \"string\") {\r\n                    this.listeners = this.listeners || {};\r\n                    this.listeners[listener] = this.listeners[listener] || [];\r\n                    this.listeners[listener].push(fn);\r\n            } else {\r\n                    arguments[0].addEventListener(arguments[1], arguments[2], false);\r\n            }\r\n    }\r\n\r\n    /**\r\n    * Remove custom listener listener\r\n    * @param  {String} listener\r\n    * @param  {Function} callback\r\n    * @return {Void}\r\n    */\r\n    off(listener, fn) {\r\n            if (typeof listener === \"string\") {\r\n                    this.listeners = this.listeners || {};\r\n                    if (listener in this.listeners === false) return;\r\n                    this.listeners[listener].splice(this.listeners[listener].indexOf(fn), 1);\r\n            } else {\r\n                    arguments[0].removeEventListener(arguments[1], arguments[2]);\r\n            }\r\n    }\r\n\r\n    /**\r\n    * Fire custom listener\r\n    * @param  {String} listener\r\n    * @return {Void}\r\n    */\r\n    emit(listener) {\r\n            this.listeners = this.listeners || {};\r\n            if (listener in this.listeners === false) return;\r\n            for (var i = 0; i < this.listeners[listener].length; i++) {\r\n                    this.listeners[listener][i].apply(this, Array.prototype.slice.call(arguments, 1));\r\n            }\r\n    }\t\r\n}","// Default SortableJS\r\nimport Nestable from './src/index';\r\nwindow.Nestable = Nestable;"],"names":["select","selector","parent","document","querySelector","selectAll","querySelectorAll","children","elem","arr","l","length","i","child","matches","push","parents","parentNode","rect","el","w","window","st","undefined","pageYOffset","documentElement","body","scrollTop","o","getBoundingClientRect","x","pageXOffset","y","left","top","height","width","Nestable","list","options","defaultConfig","threshold","animation","collapseButtonContent","expandButtonContent","includeContent","maxDepth","showPlaceholderOnMove","nodes","item","classes","content","dragging","handle","placeholder","container","button","collapsed","disabled","error","moving","config","Object","assign","DOM","_nestable","console","initialised","last","init","this","touch","DocumentTouch","dragDepth","classList","add","_nest","createElement","_getData","_nestableInstances","id","enable","setTimeout","emit","data","req","XMLHttpRequest","responseType","open","onload","load","send","removeAll","response","nest","textContent","appendChild","disable","remove","destroyItem","listEl","contentEl","buttonEl","div","contains","createDocumentFragment","childNodes","insertBefore","firstChild","removeChild","events","start","_onMouseDown","bind","move","_onMouseMove","end","_onMouseUp","addEventListener","removeEventListener","unbind","serialize","btn","_collapseList","_expandList","element","_makeParent","update","removeChildElements","parentEl","closest","childList","childElements","frag","childElement","firstElementChild","replaceChild","node","nodeName","toLowerCase","items","type","dataset","nestableDisabled","listEls","e","changedTouches","touches","evt","_getEvent","target","_toggleList","_isDisabled","preventDefault","origin","pageX","pageY","original","hierarchy","movedNode","originalParent","originalParentItem","active","collapsedParent","disabledParent","confinedParent","axis","getElementById","nestableParent","nestableAxis","style","opacity","newParent","depth","dirY","dirX","movement","Math","abs","elements","elementsFromPoint","prevEl","previousElementSibling","cantNest","allowNesting","nestDisabled","oldParent","_moveElement","childElementCount","nextEl","nextElementSibling","sibling","lastElementChild","animatable","toggle","mx","my","transform","lastParent","newParentItem","ppos","ipos","includes","_unmakeParent","_animateElement","obj","css","r","_repaint","transition","offsetHeight","prect","removeAttribute","newInstance","step","level","array","forEach","li","innerHTML","sub","Emitter","listener","fn","capture","listeners","arguments","splice","indexOf","apply","Array","prototype","slice","call"],"sourceRoot":""}